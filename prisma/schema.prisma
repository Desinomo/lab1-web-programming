generator client {
Â  provider = "prisma-client-js"
}

datasource db {
Â  provider = "postgresql"
Â  urlÂ  Â  Â  = env("DATABASE_URL")
}

enum Role {
Â  USER
Â  ADMIN
Â  MODERATOR
}

model User {
Â  idÂ  Â  Â  Â  IntÂ  Â  Â  @id @default(autoincrement())
Â  emailÂ  Â  Â StringÂ  Â @unique // @unique Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ¾ ÑÑ‚Ğ²Ğ¾Ñ€ÑÑ” Ñ–Ğ½Ğ´ĞµĞºÑ
Â  passwordÂ  String
Â  nameÂ  Â  Â  String
Â  roleÂ  Â  Â  RoleÂ  Â  Â @default(USER)
Â  avatarÂ  Â  String?
Â  createdAt DateTime @default(now())
Â  updatedAt DateTime @updatedAt
Â  passwordResetTokenÂ  Â String?Â  Â @unique
Â  passwordResetExpires DateTime?
Â  filesÂ  Â  Â File[]Â  Â  @relation("UserFiles")

Â  // --- Ğ†ĞĞ”Ğ•ĞšĞ¡Ğ˜ ---
Â  @@index([role]) // ğŸ‘ˆ (Ğ’Ğ¶Ğµ Ğ±ÑƒĞ»Ğ¾) Ğ”Ğ¾Ğ±Ñ€Ğµ Ğ´Ğ»Ñ Ñ„Ñ–Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ñ–Ñ— Ğ·Ğ° Ñ€Ğ¾Ğ»Ğ»Ñ
Â  @@index([createdAt]) // ğŸ‘ˆ (Ğ’Ğ¶Ğµ Ğ±ÑƒĞ»Ğ¾) Ğ”Ğ¾Ğ±Ñ€Ğµ Ğ´Ğ»Ñ ÑĞ¾Ñ€Ñ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ·Ğ° Ğ´Ğ°Ñ‚Ğ¾Ñ
Â  // ğŸ‘ˆ (Ğ Ñ–Ğ²ĞµĞ½ÑŒ 2.6) ĞĞŸĞ¢Ğ˜ĞœĞ†Ğ—ĞĞ¦Ğ†Ğ¯: ĞŸÑ€Ğ¸ÑĞºĞ¾Ñ€ÑÑ” Ğ¿Ğ¾ÑˆÑƒĞº 'search' Ğ·Ğ° Ñ–Ğ¼ĞµĞ½ĞµĞ¼
Â  @@index([name]) 
}

model File {
Â  idÂ  Â  Â  Â  Â  Â IntÂ  Â  Â  @id @default(autoincrement())
Â  filenameÂ  Â  Â String
Â  originalName String
Â  mimetypeÂ  Â  Â String
Â  sizeÂ  Â  Â  Â  Â Int
Â  pathÂ  Â  Â  Â  Â String
Â  uploadedByÂ  Â Int
Â  createdAtÂ  Â  DateTime @default(now())
Â  userÂ  Â  Â  Â  Â UserÂ  Â  Â @relation("UserFiles", fields: [uploadedBy], references: [id])

Â  // --- Ğ†ĞĞ”Ğ•ĞšĞ¡Ğ˜ ---
Â  // ğŸ‘ˆ (Ğ Ñ–Ğ²ĞµĞ½ÑŒ 2.6) ĞĞŸĞ¢Ğ˜ĞœĞ†Ğ—ĞĞ¦Ğ†Ğ¯: Ğ—Ğ°Ğ²Ğ¶Ğ´Ğ¸ Ñ–Ğ½Ğ´ĞµĞºÑÑƒĞ¹Ñ‚Ğµ Ğ·Ğ¾Ğ²Ğ½Ñ–ÑˆĞ½Ñ– ĞºĞ»ÑÑ‡Ñ– (foreign keys)
Â  @@index([uploadedBy])
}

model Customer {
Â  idÂ  Â  Â  Â  IntÂ  Â  Â @id @default(autoincrement())
Â  firstName String
Â  lastNameÂ  String
Â  emailÂ  Â  Â StringÂ  @unique // @unique = Ñ–Ğ½Ğ´ĞµĞºÑ
Â  ordersÂ  Â  Order[]
Â  createdAt DateTime @default(now())

Â  // --- Ğ†ĞĞ”Ğ•ĞšĞ¡Ğ˜ ---
Â  @@index([email]) // ğŸ‘ˆ (Ğ’Ğ¶Ğµ Ğ±ÑƒĞ»Ğ¾) Ğ”Ğ¾Ğ±Ñ€Ğµ
Â  @@index([createdAt]) // ğŸ‘ˆ (Ğ’Ğ¶Ğµ Ğ±ÑƒĞ»Ğ¾) Ğ”Ğ¾Ğ±Ñ€Ğµ
Â  // ğŸ‘ˆ (Ğ Ñ–Ğ²ĞµĞ½ÑŒ 2.6) ĞĞŸĞ¢Ğ˜ĞœĞ†Ğ—ĞĞ¦Ğ†Ğ¯: ĞŸÑ€Ğ¸ÑĞºĞ¾Ñ€ÑÑ” 'search' Ğ·Ğ° Ñ–Ğ¼ĞµĞ½Ğ°Ğ¼Ğ¸
Â  @@index([firstName])
Â  @@index([lastName])
Â  // ğŸ‘ˆ (Ğ Ñ–Ğ²ĞµĞ½ÑŒ 2.6) ĞĞŸĞ¢Ğ˜ĞœĞ†Ğ—ĞĞ¦Ğ†Ğ¯: Ğ”Ğ»Ñ Ğ¿Ğ¾ÑˆÑƒĞºÑƒ Ğ¿Ğ¾Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ñ–Ğ¼ĞµĞ½Ñ–
Â  @@index([lastName, firstName])
}

model Product {
Â  idÂ  Â  Â  Â  Â  Â IntÂ  Â  Â  Â  Â  Â @id @default(autoincrement())
Â  nameÂ  Â  Â  Â  Â String
Â  descriptionÂ  String?
Â  priceÂ  Â  Â  Â  Float
Â  unitÂ  Â  Â  Â  Â String?Â  Â  Â  Â 
Â  createdAtÂ  Â  DateTimeÂ  Â  Â  @default(now())
Â  recipesÂ  Â  Â  Recipe[]
Â  orderDetails OrderDetail[]

Â  // --- Ğ†ĞĞ”Ğ•ĞšĞ¡Ğ˜ ---
Â  // ğŸ‘ˆ (Ğ’Ğ¶Ğµ Ğ±ÑƒĞ»Ğ¾) Ğ”Ğ¾Ğ±Ñ€Ğµ Ğ´Ğ»Ñ 'search' Ñ‚Ğ° ÑĞ¾Ñ€Ñ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ
Â  @@index([name])
Â  // ğŸ‘ˆ (Ğ’Ğ¶Ğµ Ğ±ÑƒĞ»Ğ¾) Ğ”Ğ¾Ğ±Ñ€Ğµ Ğ´Ğ»Ñ Ñ„Ñ–Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ñ–Ñ— minPrice/maxPrice
Â  @@index([price])
Â  @@index([createdAt]) // ğŸ‘ˆ (Ğ’Ğ¶Ğµ Ğ±ÑƒĞ»Ğ¾) Ğ”Ğ¾Ğ±Ñ€Ğµ
Â  // ğŸ‘ˆ (Ğ Ñ–Ğ²ĞµĞ½ÑŒ 2.6) ĞĞŸĞ¢Ğ˜ĞœĞ†Ğ—ĞĞ¦Ğ†Ğ¯: Ğ”Ğ»Ñ Ğ¿Ğ¾Ğ²Ğ½Ğ¾Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾ÑˆÑƒĞºÑƒ (ÑĞºÑ‰Ğ¾ Ğ‘Ğ” Ğ¿Ñ–Ğ´Ñ‚Ñ€Ğ¸Ğ¼ÑƒÑ”)
Â  // @@fulltext([name, description]) // Ğ Ğ¾Ğ·ĞºĞ¾Ğ¼ĞµĞ½Ñ‚ÑƒĞ¹Ñ‚Ğµ, ÑĞºÑ‰Ğ¾ Ğ¿Ğ¾Ñ‚Ñ€Ñ–Ğ±Ğ½Ğ¾
}

model Ingredient {
Â  idÂ  Â  Â  IntÂ  Â  Â  @id @default(autoincrement())
Â  nameÂ  Â  StringÂ  Â @unique // @unique = Ñ–Ğ½Ğ´ĞµĞºÑ (Ğ”Ğ¾Ğ±Ñ€Ğµ Ğ´Ğ»Ñ 'search')
Â  recipes Recipe[]
}

model Recipe { // Ğ¦Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ Ğ·Ğ²'ÑĞ·ĞºÑƒ (join table)
Â  idÂ  Â  Â  Â  Â  Â IntÂ  Â  Â  Â @id @default(autoincrement())
Â  productIdÂ  Â  Int
Â  ingredientId Int
Â  quantityÂ  Â  Â Float

Â  productÂ  Â  ProductÂ  Â  @relation(fields: [productId], references: [id])
Â  ingredient Ingredient @relation(fields: [ingredientId], references: [id])

Â  // --- Ğ†ĞĞ”Ğ•ĞšĞ¡Ğ˜ ---
Â  // ğŸ‘ˆ (Ğ Ñ–Ğ²ĞµĞ½ÑŒ 2.6) ĞĞŸĞ¢Ğ˜ĞœĞ†Ğ—ĞĞ¦Ğ†Ğ¯: ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§ĞĞ Ğ´Ğ»Ñ join-Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†ÑŒ
Â  @@index([productId])
Â  @@index([ingredientId])
Â  // ğŸ‘ˆ (Ğ Ñ–Ğ²ĞµĞ½ÑŒ 2.6) ĞĞŸĞ¢Ğ˜ĞœĞ†Ğ—ĞĞ¦Ğ†Ğ¯: Ğ”Ğ»Ñ Ğ¿Ğ¾ÑˆÑƒĞºÑƒ ÑƒĞ½Ñ–ĞºĞ°Ğ»ÑŒĞ½Ğ¸Ñ… Ğ¿Ğ°Ñ€
Â  @@unique([productId, ingredientId])
}

model Order {
Â  idÂ  Â  Â  Â  Â IntÂ  Â  Â  Â  Â  Â @id @default(autoincrement())
Â  customerId Int
Â  totalPrice Float
Â  dateÂ  Â  Â  Â DateTimeÂ  Â  Â  @default(now())
Â  customerÂ  Â CustomerÂ  Â  Â  @relation(fields: [customerId], references: [id])
Â  detailsÂ  Â  OrderDetail[]

Â  // --- Ğ†ĞĞ”Ğ•ĞšĞ¡Ğ˜ ---
Â  // ğŸ‘ˆ (Ğ’Ğ¶Ğµ Ğ±ÑƒĞ»Ğ¾) Ğ”Ğ¾Ğ±Ñ€Ğµ Ğ´Ğ»Ñ Ñ„Ñ–Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ñ–Ñ— Ğ·Ğ° ĞºĞ»Ñ–Ñ”Ğ½Ñ‚Ğ¾Ğ¼
Â  @@index([customerId])
Â  // ğŸ‘ˆ (Ğ’Ğ¶Ğµ Ğ±ÑƒĞ»Ğ¾) Ğ”Ğ¾Ğ±Ñ€Ğµ Ğ´Ğ»Ñ Ñ„Ñ–Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ñ–Ñ— Ğ·Ğ° Ğ´Ğ°Ñ‚Ğ¾Ñ
Â  @@index([date])
Â  // ğŸ‘ˆ (Ğ Ñ–Ğ²ĞµĞ½ÑŒ 2.6) ĞĞŸĞ¢Ğ˜ĞœĞ†Ğ—ĞĞ¦Ğ†Ğ¯: Ğ”Ğ»Ñ Ñ„Ñ–Ğ»ÑŒÑ‚Ñ€Ğ°Ñ†Ñ–Ñ— minPrice/maxPrice
Â  @@index([totalPrice])
Â  // ğŸ‘ˆ (Ğ Ñ–Ğ²ĞµĞ½ÑŒ 2.6) ĞĞŸĞ¢Ğ˜ĞœĞ†Ğ—ĞĞ¦Ğ†Ğ¯: Ğ”Ğ»Ñ ĞºĞ¾Ğ¼Ğ±Ñ–Ğ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ… Ğ·Ğ°Ğ¿Ğ¸Ñ‚Ñ–Ğ² (ĞºĞ»Ñ–Ñ”Ğ½Ñ‚ + Ğ´Ğ°Ñ‚Ğ°)
Â  @@index([customerId, date])
}

model OrderDetail { // Ğ¦Ğµ Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ñ Ğ·Ğ²'ÑĞ·ĞºÑƒ (join table)
Â  idÂ  Â  Â  Â  Int @id @default(autoincrement())
Â  orderIdÂ  Â Int
Â  productId Int
Â  quantityÂ  Int

Â  orderÂ  Â OrderÂ  Â @relation(fields: [orderId], references: [id])
Â  product Product @relation(fields: [productId], references: [id])

Â  // --- Ğ†ĞĞ”Ğ•ĞšĞ¡Ğ˜ ---
Â  // ğŸ‘ˆ (Ğ Ñ–Ğ²ĞµĞ½ÑŒ 2.6) ĞĞŸĞ¢Ğ˜ĞœĞ†Ğ—ĞĞ¦Ğ†Ğ¯: ĞšĞ Ğ˜Ğ¢Ğ˜Ğ§ĞĞ Ğ´Ğ»Ñ join-Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†ÑŒ
Â  @@index([orderId])
Â  @@index([productId])
Â  // ğŸ‘ˆ (Ğ Ñ–Ğ²ĞµĞ½ÑŒ 2.6) ĞĞŸĞ¢Ğ˜ĞœĞ†Ğ—ĞĞ¦Ğ†Ğ¯: Ğ”Ğ»Ñ ĞºĞ¾Ğ¼Ğ±Ñ–Ğ½Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ… Ğ·Ğ°Ğ¿Ğ¸Ñ‚Ñ–Ğ²
Â  @@index([orderId, productId])
}